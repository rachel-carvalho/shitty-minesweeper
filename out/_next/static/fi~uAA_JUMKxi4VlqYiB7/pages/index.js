(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"/eQG":function(t,e,n){n("v5Dd");var a=n("WEpk").Object;t.exports=function(t,e){return a.getOwnPropertyDescriptor(t,e)}},"4mXO":function(t,e,n){t.exports=n("7TPF")},"6mSP":function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){var t=n("79zj");return{page:t.default||t}}])},"79zj":function(t,e,n){"use strict";n.r(e),function(t){var a=n("zrwo"),r=n("UXZV"),i=n.n(r),o=n("dfwq"),s=n("vYYK"),u=n("doui"),l=n("0iUn"),d=n("sLSF"),c=n("MI3g"),h=n("a7VT"),f=n("Tit0"),p=n("q1tI"),b=n.n(p),g=n("x+Gp");e.default=function(e){function n(){return Object(l.default)(this,n),Object(c.default)(this,Object(h.default)(n).apply(this,arguments))}return Object(f.default)(n,e),Object(d.default)(n,[{key:"parseSearch",value:function(){var e,n,r,l,d,c=this.props;return n=c.defaultRows,e=c.defaultColumns,(null!=(l=t.location)?l.search:void 0)&&(n||e)?(r=location.search.substring(1).split("&").map(function(t){var e,n,a=t.split("="),r=Object(u.default)(a,2);return e=r[0],n=r[1],Object(s.a)({},"".concat(e),n)}),d=i.a.apply(Object,Object(o.default)(r)),Object(a.a)({},this.props,d)):this.props}},{key:"render",value:function(){var t,e,n,a=this.parseSearch();return n=a.rows,e=a.columns,t=Math.round(e*n*.18),b.a.createElement(g.a,{rows:n,columns:e,bombs:t})}}],[{key:"getInitialProps",value:function(t){var e=t.query;t.req;return{rows:(null!=e?e.rows:void 0)||15,columns:(null!=e?e.columns:void 0)||10,defaultRows:!(null!=e?e.rows:void 0),defaultColumns:!(null!=e?e.columns:void 0)}}}]),n}(p.Component)}.call(this,n("yLpj"))},"7TPF":function(t,e,n){n("AUvm"),t.exports=n("WEpk").Object.getOwnPropertySymbols},"9Jkg":function(t,e,n){t.exports=n("oh+g")},FZuZ:function(t,e,n){"use strict";var a=n("0iUn"),r=n("sLSF"),i=n("MI3g"),o=n("a7VT"),s=n("AT/M"),u=n("Tit0"),l=n("q1tI"),d=n.n(l),c=function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")};e.a=function(t){function e(t){var n;return Object(a.default)(this,e),(n=Object(i.default)(this,Object(o.default)(e).call(this,t))).calculateTime=n.calculateTime.bind(Object(s.default)(n)),n.handleRestart=n.handleRestart.bind(Object(s.default)(n)),n.state={elapsed:0},n}return Object(u.default)(e,t),Object(r.default)(e,[{key:"componentDidMount",value:function(){return this.intervalID=setInterval(this.calculateTime,1e3)}},{key:"componentWillUnmount",value:function(){return clearInterval(this.intervalID)}},{key:"calculateTime",value:function(){var t;return c(this,e),this.props.startedAt?(t=(this.props.endedAt||new Date)-this.props.startedAt,this.setState({elapsed:Math.round(t/1e3)})):this.setState({elapsed:0})}},{key:"handleRestart",value:function(){return c(this,e),this.setState({elapsed:0}),this.props.onRestart()}},{key:"render",value:function(){var t,e,n,a,r,i,o,s,u,l=this.props;return e=l.bombs,i=l.foundBombs,r=l.flagging,n=l.dead,u=l.won,t=l.best,o=l.onFlagToggle,a=this.state.elapsed,s=e-i,d.a.createElement("div",{id:"toolbar"},d.a.createElement("span",{id:"bombs"},s.toString().padStart(e.toString().length,0)),d.a.createElement("button",{onClick:this.handleRestart},n?"ðŸ˜µ":u?"ðŸ˜Ž":"ðŸ™‚"),d.a.createElement("button",{onClick:o},r?"ðŸš©":"ðŸ’£"),d.a.createElement("time",null,a.toString().padStart(3,0)),t?d.a.createElement("span",{id:"best"},"Best: ",t.elapsed):void 0)}}]),e}(l.Component)},"Gqi+":function(t,e,n){"use strict";var a=n("dfwq"),r=n("doui"),i=n("0iUn"),o=n("sLSF"),s=n("MI3g"),u=n("a7VT"),l=n("AT/M"),d=n("Tit0");Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,function(n,a){return Array.isArray(a)?n.push.apply(n,t.call(a,e-1)):n.push(a),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var c=n("q1tI"),h=n.n(c),f=function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")},p=function(t){function e(t){var n;return Object(i.default)(this,e),(n=Object(s.default)(this,Object(u.default)(e).call(this,t))).componentDidUpdate=n.componentDidUpdate.bind(Object(l.default)(n)),n.handleClick=n.handleClick.bind(Object(l.default)(n)),n.initialState={open:!1,flagged:!1,exploded:!1},n.state=n.initialState,n}return Object(d.default)(e,t),Object(o.default)(e,[{key:"componentDidUpdate",value:function(t){if(f(this,e),t.game!==this.props.game)return this.setState(this.initialState)}},{key:"handleClick",value:function(){var t,n,a;f(this,e);var r=this.props;if(t=r.dead,a=r.opened,n=r.flagging,!t)return a||this.state.open?this.expand():n?this.flag():this.open()}},{key:"expand",value:function(){var t,e,n,a=this.props;return n=a.row,t=a.column,e=a.neighbors,(0,a.onExpand)(n,t,e)}},{key:"flag",value:function(){var t,e,n,a=this.props;return n=a.row,t=a.column,e=a.onFlag,this.setState(function(a){var r;return r=!a.flagged,e(n,t,r),{flagged:r}})}},{key:"open",value:function(){var t,e,n,a,r,i=this.props;return r=i.row,e=i.column,t=i.bomb,n=i.onDeath,a=i.onOpen,this.setState({open:!0}),t?(this.setState({exploded:!0}),n(r,e)):a(r,e)}},{key:"render",value:function(){var t,e,n,a,r,i,o,s,u=this.props;u.row,u.column,t=u.bomb,i=u.neighbors,n=u.dead,s=u.opened;var l=this.state;return o=l.open,r=l.flagged,a=l.exploded,e=[],((o=o||s)||a||n&&t&&!r)&&e.push("open"),n&&r&&!t&&e.push("wrong-flag"),i&&e.push("neighbor"),i&&e.push("neighbor-".concat(i)),h.a.createElement("button",{onClick:this.handleClick,className:e.join(" ")},o&&i?i:void 0,!o&&!n||!t||a||r?void 0:"ðŸ’£",r?"ðŸš©":void 0,a?"ðŸ’¥":void 0)}}]),e}(c.Component),b=function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")};e.a=function(t){function e(t){var n;return Object(i.default)(this,e),(n=Object(s.default)(this,Object(u.default)(e).call(this,t))).componentDidUpdate=n.componentDidUpdate.bind(Object(l.default)(n)),n.handleOpen=n.handleOpen.bind(Object(l.default)(n)),n.handleFlag=n.handleFlag.bind(Object(l.default)(n)),n.handleDeath=n.handleDeath.bind(Object(l.default)(n)),n.handleExpand=n.handleExpand.bind(Object(l.default)(n)),n.initialState={distributed:!1,bombLocations:[],dead:!1,opened:[],flagged:[],game:""},n.state=n.initialState,n.recentlyOpened=[],n.couldHaveWon=!1,n}return Object(d.default)(e,t),Object(o.default)(e,[{key:"componentDidUpdate",value:function(t){var n,a;if(b(this,e),t.started&&!this.props.started)return this.reset();if(this.firstOpening){var i=Object(r.default)(this.firstOpening,2);return a=i[0],n=i[1],this.firstOpening=null,this.handleOpen(a,n)}return this.cascadeOpening(),this.checkIfWon()}},{key:"reset",value:function(){return this.recentlyOpened=[],this.firstOpening=null,this.couldHaveWon=!1,this.setState(this.initialState)}},{key:"distribute",value:function(t,e){var n,a,r,i,o,s,u=this.props;return s=u.rows,i=u.columns,r=u.bombs,n=function(){for(var t=[],e=0;0<=s?e<s:e>s;0<=s?e++:e--)t.push(e);return t}.apply(this).map(function(t){return function(){for(var t=[],e=0;0<=i?e<i:e>i;0<=i?e++:e--)t.push(e);return t}.apply(this).map(function(e){return[t,e]})}).flat().filter(function(n){return n[0]!==t||n[1]!==e}),a=[],function(){for(var t=[],e=0;0<=r?e<r:e>r;0<=r?e++:e--)t.push(e);return t}.apply(this).forEach(function(){var t;return t=Math.round(Math.random()*(n.length-1)),a.push(n.splice(t,1)[0])}),a.sort(function(t,e){return"".concat(t[0],", ").concat(t[1])-"".concat(e[0],", ").concat(e[1])}),o=new Date,this.setState({distributed:!0,game:o,bombLocations:a}),this.props.onStart(o)}},{key:"bomb",value:function(t,e){return this.state.bombLocations.some(function(n){return n[0]===t&&n[1]===e})}},{key:"neighbors",value:function(t,e){var n=this;if(!this.bomb(t,e))return this.surrounding(t,e).filter(function(t){return n.bomb.apply(n,Object(a.default)(t))}).length}},{key:"surrounding",value:function(t,e){var n,a,r,i=this.props;return r=i.rows,n=i.columns,function(){for(var e=[],n=a=t-1,r=t+1;a<=r?n<=r:n>=r;a<=r?n++:n--)e.push(n);return e}.apply(this).filter(function(t){return t>=0&&t<r}).map(function(t){var a;return function(){for(var t=[],n=a=e-1,r=e+1;a<=r?n<=r:n>=r;a<=r?n++:n--)t.push(n);return t}.apply(this).filter(function(t){return t>=0&&t<n}).map(function(e){return[t,e]})}).flat()}},{key:"handleOpen",value:function(t,n){var a=this;return b(this,e),this.state.distributed?this.setState(function(e){var r;if(!e.opened.some(function(e){return e[0]===t&&e[1]===n}))return(r=e.opened.slice(0)).push([t,n]),a.recentlyOpened.push([t,n]),{opened:r}}):(this.distribute(t,n),this.firstOpening=[t,n])}},{key:"cascadeOpening",value:function(){var t,e,n,i,o,s=this;for(n=[];(e=this.recentlyOpened.shift())&&e;){var u=e,l=Object(r.default)(u,2);i=l[0],t=l[1],this.neighbors(i,t)?n.push(void 0):(o=this.surrounding(i,t),n.push(o.forEach(function(t){return s.handleOpen.apply(s,Object(a.default)(t))})))}return n}},{key:"handleFlag",value:function(t,n,a){var r,i;b(this,e);var o=this.props;return r=o.onFlagAdded,i=o.onFlagRemoved,this.setState(function(e){var o;return o=e.flagged.slice(0),a?(o.push([t,n]),r(),this.couldHaveWon=!0):(o=o.filter(function(e){return e[0]!==t||e[1]!==n}),i()),{flagged:o}})}},{key:"handleDeath",value:function(){return b(this,e),this.setState({dead:!0}),this.props.onDeath()}},{key:"opened",value:function(t,e){return this.state.opened.some(function(n){return n[0]===t&&n[1]===e})}},{key:"flagged",value:function(t,e){return this.state.flagged.some(function(n){return n[0]===t&&n[1]===e})}},{key:"handleExpand",value:function(t,n,r){var i,o,s=this;if(b(this,e),(o=(i=this.surrounding(t,n)).filter(function(t){return!s.flagged.apply(s,Object(a.default)(t))})).length===i.length-r)return o.forEach(function(t){return s.bomb.apply(s,Object(a.default)(t))?s.handleDeath():(s.handleOpen.apply(s,Object(a.default)(t)),s.couldHaveWon=!0)})}},{key:"checkIfWon",value:function(){var t,e;if(!this.props.won&&this.couldHaveWon)return t=this.state.flagged.length===this.props.bombs,e=this.state.opened.length===this.props.rows*this.props.columns-this.props.bombs,t&&e?this.props.onWin():void 0}},{key:"render",value:function(){var t,e,n,a,r,i=this,o=this.props;r=o.rows,t=o.columns,n=o.flagging;var s=this.state;return e=s.dead,a=s.game,h.a.createElement("div",{id:"board"},function(){for(var t=[],e=0;0<=r?e<r:e>r;0<=r?e++:e--)t.push(e);return t}.apply(this).map(function(r){return h.a.createElement("div",{key:r},function(){for(var e=[],n=0;0<=t?n<t:n>t;0<=t?n++:n--)e.push(n);return e}.apply(i).map(function(t){return h.a.createElement(p,{key:t,row:r,column:t,flagging:n,bomb:i.bomb(r,t),opened:i.opened(r,t),dead:e,neighbors:i.neighbors(r,t),game:a,onFlag:i.handleFlag,onOpen:i.handleOpen,onExpand:i.handleExpand,onDeath:i.handleDeath})}))}))}}]),e}(c.Component)},"Jo+v":function(t,e,n){t.exports=n("/eQG")},"oh+g":function(t,e,n){var a=n("WEpk"),r=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},v5Dd:function(t,e,n){var a=n("NsO/"),r=n("vwuL").f;n("zn7N")("getOwnPropertyDescriptor",function(){return function(t,e){return r(a(t),e)}})},vYYK:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var a=n("hfKm"),r=n.n(a);function i(t,e,n){return e in t?r()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},"x+Gp":function(t,e,n){"use strict";(function(t){var a=n("9Jkg"),r=n.n(a),i=n("zrwo"),o=n("0iUn"),s=n("sLSF"),u=n("MI3g"),l=n("a7VT"),d=n("AT/M"),c=n("Tit0"),h=n("q1tI"),f=n.n(h),p=n("PgRs"),b=n.n(p),g=n("FZuZ"),v=n("Gqi+"),m=(n("GNBN"),function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")});e.a=function(e){function n(){var t;return Object(o.default)(this,n),(t=Object(u.default)(this,Object(l.default)(n).call(this))).handleRestart=t.handleRestart.bind(Object(d.default)(t)),t.handleStart=t.handleStart.bind(Object(d.default)(t)),t.handleFlagToggle=t.handleFlagToggle.bind(Object(d.default)(t)),t.handleFlagAdded=t.handleFlagAdded.bind(Object(d.default)(t)),t.handleFlagRemoved=t.handleFlagRemoved.bind(Object(d.default)(t)),t.handleDeath=t.handleDeath.bind(Object(d.default)(t)),t.handleWin=t.handleWin.bind(Object(d.default)(t)),t.initialState={started:!1,flagging:!1,foundBombs:0,dead:!1,startedAt:null,endedAt:null,won:!1,best:null},t.state=Object(i.a)({},t.initialState),t}return Object(c.default)(n,e),Object(s.default)(n,[{key:"componentDidMount",value:function(){return this.setState({best:this.best()})}},{key:"handleRestart",value:function(){return m(this,n),this.setState(Object(i.a)({},this.initialState,{best:this.best()}))}},{key:"handleStart",value:function(t){return m(this,n),this.setState({started:!0,startedAt:t})}},{key:"handleFlagToggle",value:function(){return m(this,n),this.setState(function(t){return{flagging:!t.flagging}})}},{key:"handleFlagAdded",value:function(){return m(this,n),this.setState(function(t){return{foundBombs:t.foundBombs+1}})}},{key:"handleFlagRemoved",value:function(){return m(this,n),this.setState(function(t){return{foundBombs:t.foundBombs-1}})}},{key:"handleDeath",value:function(){return m(this,n),this.setState({dead:!0,endedAt:new Date})}},{key:"storage",value:function(){return t.localStorage||{}}},{key:"handleWin",value:function(){var t;return m(this,n),t=new Date,this.saveTime(t),this.setState({won:!0,endedAt:t,best:this.best()})}},{key:"saveTime",value:function(t){var e,n,a,i,o,s=this.props;return o=s.rows,e=s.columns,n={startedAt:this.state.startedAt,endedAt:t},(i=this.records())[a="".concat(o,"_").concat(e)]||(i[a]=[]),i["".concat(o,"_").concat(e)].push(n),this.storage().shittyMinesweeper=r()(i)}},{key:"records",value:function(){var t,e,n;if(!this.storage().shittyMinesweeper)return{};for(n in e=JSON.parse(this.storage().shittyMinesweeper),e)(t=e[n]).forEach(function(t){var e;return t.startedAt=new Date(Date.parse(t.startedAt)),t.endedAt=new Date(Date.parse(t.endedAt)),e=t.endedAt-t.startedAt,t.elapsed=Math.round(e/1e3)}),t.sort(function(t,e){return t.elapsed-e.elapsed});return e}},{key:"best",value:function(){var t,e,n=this.props;return e=n.rows,t=n.columns,(this.records()["".concat(e,"_").concat(t)]||[])[0]}},{key:"render",value:function(){var t,e,n,a,r,i,o,s,u,l,d,c=this.state;u=c.started,l=c.startedAt,r=c.endedAt,i=c.flagging,o=c.foundBombs,a=c.dead,d=c.won,t=c.best;var p=this.props;return s=p.rows,n=p.columns,e=p.bombs,f.a.createElement(h.Fragment,null,f.a.createElement(b.a,null,f.a.createElement("title",null,"Shitty Minesweeper"),f.a.createElement("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})),f.a.createElement(g.a,{bombs:e,foundBombs:o,startedAt:l,endedAt:r,flagging:i,dead:a,won:d,best:t,onRestart:this.handleRestart,onFlagToggle:this.handleFlagToggle}),f.a.createElement(v.a,{flagging:i,rows:s,columns:n,bombs:e,started:u,won:d,onFlagAdded:this.handleFlagAdded,onStart:this.handleStart,onFlagRemoved:this.handleFlagRemoved,onDeath:this.handleDeath,onWin:this.handleWin}))}}]),n}(h.Component)}).call(this,n("yLpj"))},zrwo:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var a=n("Jo+v"),r=n.n(a),i=n("4mXO"),o=n.n(i),s=n("pLtp"),u=n.n(s),l=n("vYYK");function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=u()(n);"function"==typeof o.a&&(a=a.concat(o()(n).filter(function(t){return r()(n,t).enumerable}))),a.forEach(function(e){Object(l.a)(t,e,n[e])})}return t}}},[["6mSP",1,0,6]]]);